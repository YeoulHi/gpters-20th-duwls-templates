#!/bin/bash
# test-clarify-path.sh
# Clarify Path í›„ì† ê°€ì´ë“œ ë¬¸ì„œ ìë™ ìƒì„± (10.5.1, 10.6, 10.7)
# TDD: ì„¤ê³„ ë¬¸ì„œ â†’ êµ¬í˜„ ê·œì¹™ â†’ ì‚°ì¶œë¬¼ ë§¤í•‘ ì²´í¬

set -e

BASE_DIR="gpters-20th-templates/_systems/10-clarify-path"

echo "ğŸ§ª Testing Clarify Path extended guides generation..."
echo ""

# 1. ê¸°ì¡´ ë¬¸ì„œ í™•ì¸
echo "ğŸ“‹ Checking existing documents..."
if [ ! -f "$BASE_DIR/10.3-task-clarification.md" ]; then
  echo "âŒ ERROR: 10.3-task-clarification.md not found"
  exit 1
fi
echo "âœ… 10.3-task-clarification.md exists"

if [ ! -f "$BASE_DIR/10.5-automation-architecture-design.md" ]; then
  echo "âŒ ERROR: 10.5-automation-architecture-design.md not found"
  exit 1
fi
echo "âœ… 10.5-automation-architecture-design.md exists"

# 2. í•„ìˆ˜ íŒŒì¼ 3ê°œ ìƒì„± í…ŒìŠ¤íŠ¸
echo ""
echo "ğŸ“ Creating extended guide documents..."

# 10.5.1-design-document-guide.md
cat > "$BASE_DIR/10.5.1-design-document-guide.md" << 'EOF'
---
route: "10.5 ì„¤ê³„ í…œí”Œë¦¿ â†’ êµ¬ì²´ì  ì‘ì„± ë°©ë²• ì œì‹œ"
format: "ì‘ì„± ìˆ˜ì¤€ ì •ì˜ + ì²´í¬ë¦¬ìŠ¤íŠ¸ + ì‹¤ì œ ì˜ˆì‹œ"
context: "ì„¤ê³„ ë¬¸ì„œê°€ ëª¨í˜¸í•˜ê±°ë‚˜ ëˆ„ë½ë˜ëŠ” ê²ƒì„ ë°©ì§€. ì‘ì„±ìê°€ ì¼ê´€ëœ í’ˆì§ˆì˜ ë¬¸ì„œ ìƒì„±."
rules: "ê° ì„¹ì…˜ë³„ ìƒì„¸ë„ ëª…ì‹œ. ì˜ˆì‹œëŠ” 3ê°€ì§€ (íŒŒì¼/ì›¹/ì´ë©”ì¼). ì²´í¬ë¦¬ìŠ¤íŠ¸ í•„ìˆ˜."
---

# 10.5.1. ì„¤ê³„ ë¬¸ì„œ ì‘ì„± ê°€ì´ë“œ

## ì‘ì„± ì›ì¹™

**ì›ì¹™ 1: ëª¨í˜¸í•¨ ì—†ìŒ**
- "ì‰½ë‹¤" â†’ "ë‹¨ê³„ 3ê°œ ì´í•˜"
- "ë³µì¡í•˜ë‹¤" â†’ "4ë‹¨ê³„ ì´ìƒ"

**ì›ì¹™ 2: ëˆ„ë½ ì—†ìŒ**
- ê¸°ìˆ ì„ íƒ ì´ìœ  (3ì¤„ ì´ìƒ)
- ì˜ˆìƒ ì‹¤íŒ¨ ì§€ì  (ìµœì†Œ 3ê°œ)
- ì œì•½ì‚¬í•­ë³„ í•´ê²°ë°©ì•ˆ

**ì›ì¹™ 3: ê²€ì¦ ê°€ëŠ¥**
- ê°œë°œíŒ€ì´ ì½ê³  ë°”ë¡œ êµ¬í˜„ ê°€ëŠ¥ ìˆ˜ì¤€
- ë¶ˆëª…í™•í•œ í‘œí˜„ ê¸ˆì§€

---

## ê° ì„¹ì…˜ë³„ ì‘ì„± ë°©ë²•

### 1ï¸âƒ£ ê¸°ìˆ  ìŠ¤íƒ ê²°ì •

**ì‘ì„± ìˆ˜ì¤€: ê·¼ê±° í¬í•¨ ìƒì„¸í™”**

âŒ ë‚˜ìœ ì˜ˆ:
\`\`\`
ê¸°ìˆ : Python, Selenium
ì„ íƒ ì´ìœ : ì¢‹ì•„ì„œ
\`\`\`

âœ… ì¢‹ì€ ì˜ˆ:
\`\`\`
ê¸°ìˆ : Python 3.11.7, Selenium 4.15
ì„ íƒ ì´ìœ :
- ì›¹ í¬ë¡¤ë§ í•„ìš” â†’ Selenium í‘œì¤€ ì„ íƒ
- ê¸°ì¡´ í”„ë¡œì íŠ¸ê°€ Python 3.11.7 â†’ ë²„ì „ í†µì¼
- Windows/Linux ëª¨ë‘ ì§€ì› í•„ìš” â†’ í¬ë¡œìŠ¤í”Œë«í¼ ë„êµ¬

ëŒ€ì²´ ê¸°ìˆ  ê²€í† :
- Playwright: ë” ë¹ ë¥´ì§€ë§Œ, íŒ€ ê²½í—˜ ì—†ìŒ
- Pupeteer: Node.js í•„ìš” â†’ Python í”„ë¡œì íŠ¸ì™€ ì´ì§ˆì 
\`\`\`

---

### 2ï¸âƒ£ ì•„í‚¤í…ì²˜ ì„¤ê³„

**ì‘ì„± ìˆ˜ì¤€: ë‹¨ê³„ë³„ + ë°ì´í„° íë¦„ ëª…í™•**

âŒ ë‚˜ìœ ì˜ˆ:
\`\`\`
í”„ë¡œì„¸ìŠ¤: ì…ë ¥ â†’ ì²˜ë¦¬ â†’ ì¶œë ¥
\`\`\`

âœ… ì¢‹ì€ ì˜ˆ:
\`\`\`
Phase 1: ë°ì´í„° ìˆ˜ì§‘
- ì…ë ¥: CSV íŒŒì¼ (ê²½ë¡œ: ~/data/input.csv)
- ì²˜ë¦¬: pandas.read_csv() â†’ ë°ì´í„° ê²€ì¦
- ì¶œë ¥: ê²€ì¦ëœ DataFrame (ë©”ëª¨ë¦¬)
- ì˜ˆìƒ ì‹œê°„: 2ì´ˆ (100MB íŒŒì¼ ê¸°ì¤€)

Phase 2: ë°ì´í„° ë³€í™˜
- ì…ë ¥: DataFrame
- ì²˜ë¦¬: ì»¬ëŸ¼ ë§¤í•‘ â†’ ì¤‘ë³µ ì œê±° â†’ ì •ë ¬
- ì¶œë ¥: ì •ì œëœ DataFrame
- ì˜ˆìƒ ì‹œê°„: 5ì´ˆ

Phase 3: ê²°ê³¼ ì €ì¥
- ì…ë ¥: DataFrame
- ì²˜ë¦¬: í˜•ì‹ ë³€í™˜ â†’ íŒŒì¼ ì €ì¥
- ì¶œë ¥: output.xlsx (ê²½ë¡œ: ~/results/)
- ì˜ˆìƒ ì‹œê°„: 1ì´ˆ

ì „ì²´ ì†Œìš” ì‹œê°„: 8ì´ˆ (ê¸°ì¡´ 15ë¶„ ëŒ€ë¹„ 99.9% ë‹¨ì¶•)
\`\`\`

---

## ğŸ“‹ ì„¤ê³„ ë¬¸ì„œ ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

ì‘ì„± ì™„ë£Œ ì „ í™•ì¸:

- [ ] ê¸°ìˆ ì„ íƒ ê·¼ê±°ê°€ 3ì¤„ ì´ìƒì¸ê°€?
- [ ] ì•„í‚¤í…ì²˜ê°€ Phaseë³„ë¡œ ëª…í™•í•œê°€?
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì§€ì ì´ 3ê°œ ì´ìƒ ìˆëŠ”ê°€?
- [ ] ê° ì—ëŸ¬ë³„ ì²˜ë¦¬ ë°©ì‹ì´ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] ì˜ì¡´ì„±ì— ë²„ì „ì´ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] ì„±ê³µ ì§€í‘œê°€ ì¸¡ì • ê°€ëŠ¥í•œ ìˆ«ìì¸ê°€?
- [ ] ê°œë°œíŒ€ì´ ì½ê³  ë°”ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì¸ê°€?

---

**ë‹¤ìŒ**: [10.6-implementation-rules](10.6-implementation-rules.md)
EOF

# 10.6-implementation-rules.md
cat > "$BASE_DIR/10.6-implementation-rules.md" << 'EOF'
---
route: "ì„¤ê³„ ì™„ë£Œ â†’ êµ¬í˜„ ì‹œì‘ ì „ ì¤€ìˆ˜ì‚¬í•­"
format: "ì½”ë”© ê·œì¹™ + í˜¸í™˜ì„± ì²´í¬ + TDD í”„ë¡œì„¸ìŠ¤"
context: "Python 3.11.7 + Git Bash í™˜ê²½ì—ì„œ ì¼ê´€ì„± ìˆëŠ” êµ¬í˜„. ëª¨ë“  ê°œë°œìê°€ ë™ì¼ í‘œì¤€ ì¤€ìˆ˜."
rules: "ëª¨ë“  ì½”ë“œëŠ” TDD ì›ì¹™ ì¤€ìˆ˜. í…ŒìŠ¤íŠ¸ ë¨¼ì €, êµ¬í˜„ ë‚˜ì¤‘. í˜¸í™˜ì„± ì²´í¬ í•„ìˆ˜."
---

# 10.6. êµ¬í˜„ ê·œì¹™

## í™˜ê²½ ìš”êµ¬ì‚¬í•­

**í•„ìˆ˜ ë²„ì „:**
\`\`\`
Python: 3.11.7 (ì •í™•íˆ)
Git Bash: ìµœì‹  ë²„ì „
OS: Windows / Linux / macOS
\`\`\`

**Python ë²„ì „ í™•ì¸:**
\`\`\`bash
python --version
# Python 3.11.7 ì¶œë ¥ í•„ìˆ˜
\`\`\`

---

## ì½”ë”© ê·œì¹™

### 1ï¸âƒ£ Python 3.11.7 í˜¸í™˜ì„±

**í•„ìˆ˜ í•­ëª©:**
\`\`\`python
# âœ… í•„ìˆ˜: Type hints
def process_file(filename: str) -> dict:
    pass

# âœ… í•„ìˆ˜: f-strings
name = "Alice"
message = f"Hello, {name}"

# âœ… í•„ìˆ˜: dataclasses (3.7+)
from dataclasses import dataclass

@dataclass
class Config:
    timeout: int = 30
    retry: int = 3
\`\`\`

---

### 2ï¸âƒ£ Git Bash í˜¸í™˜ì„±

**ê²½ë¡œ ì‘ì„±:**
\`\`\`python
# âŒ ê¸ˆì§€: Windows ê²½ë¡œ ì§ì ‘ ì‘ì„±
path = "C:\\Users\\user\\file.txt"

# âœ… í—ˆìš©: pathlib ì‚¬ìš©
from pathlib import Path
path = Path("C:/Users/user/file.txt")
# ë˜ëŠ”
path = Path.home() / "file.txt"
\`\`\`

---

## TDD í”„ë¡œì„¸ìŠ¤

### í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™

**ê²½ë¡œ:** \`__test__/{YYYYMMDD}_{title}/test_{module}.py\`

**í…ŒìŠ¤íŠ¸ íŒŒì¼ êµ¬ì¡°:**
\`\`\`python
import unittest
from pathlib import Path
import sys

sys.path.insert(0, str(Path(__file__).parent.parent.parent / "_scripts"))

class TestMain(unittest.TestCase):
    def test_function_returns_expected_output(self):
        """í…ŒìŠ¤íŠ¸: í•¨ìˆ˜ê°€ ì˜ˆìƒ ì¶œë ¥ì„ ë°˜í™˜"""
        result = some_function({"key": "value"})
        self.assertEqual(result["status"], "success")

if __name__ == "__main__":
    unittest.main()
\`\`\`

---

## í˜¸í™˜ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Python 3.11.7ì—ì„œ ì‹¤í–‰ë˜ëŠ”ê°€?
- [ ] Git Bashì—ì„œ ì‹¤í–‰ë˜ëŠ”ê°€?
- [ ] í•œê¸€ ì…ì¶œë ¥ì´ ì •ìƒì¸ê°€?
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ”ê°€?

---

**ë‹¤ìŒ**: [10.7-artifact-mapping](10.7-artifact-mapping.md)
EOF

# 10.7-artifact-mapping.md
cat > "$BASE_DIR/10.7-artifact-mapping.md" << 'EOF'
---
route: "ì„¤ê³„ + ê·œì¹™ â†’ í…ŒìŠ¤íŠ¸/êµ¬í˜„ ì‚°ì¶œë¬¼ ë§¤í•‘"
format: "ì„¤ê³„ ì„¹ì…˜ â†” í…ŒìŠ¤íŠ¸ íŒŒì¼ â†” êµ¬í˜„ íŒŒì¼ ë§¤í•‘í‘œ"
context: "ì„¤ê³„ì˜ ê° ë¶€ë¶„ì´ ì–´ë–¤ í…ŒìŠ¤íŠ¸/ì½”ë“œë¡œ êµ¬í˜„ë˜ëŠ”ì§€ ì¶”ì . ëˆ„ë½ ë°©ì§€."
rules: "ê° ì„¤ê³„ í•­ëª©ë§ˆë‹¤ ìµœì†Œ 1ê°œ í…ŒìŠ¤íŠ¸ í•„ìˆ˜. ëª¨ë“  ë§¤í•‘ì´ ì™„ë£Œë˜ì–´ì•¼ ë°°í¬ ìŠ¹ì¸."
---

# 10.7. ì‚°ì¶œë¬¼ ë§¤í•‘ (ì„¤ê³„ â†’ í…ŒìŠ¤íŠ¸ â†’ êµ¬í˜„)

## ë§¤í•‘ ì›ì¹™

**ì›ì¹™ 1: ì„¤ê³„ â†’ í…ŒìŠ¤íŠ¸ 1:1 ë§¤í•‘**
\`\`\`
ì„¤ê³„ ì„¹ì…˜    â†’  í…ŒìŠ¤íŠ¸ íŒŒì¼  â†’  êµ¬í˜„ íŒŒì¼
ê¸°ìˆ ìŠ¤íƒ     â†’  test_tech    â†’  config.py
ì•„í‚¤í…ì²˜ 1   â†’  test_phase1   â†’  processor.py
ì•„í‚¤í…ì²˜ 2   â†’  test_phase2   â†’  processor.py
ì—ëŸ¬ì²˜ë¦¬     â†’  test_errors   â†’  error_handler.py
\`\`\`

**ì›ì¹™ 2: TDD ìˆœì„œ**
1. í…ŒìŠ¤íŠ¸ ì‘ì„± (ì„¤ê³„ ê¸°ë°˜)
2. êµ¬í˜„ ì½”ë“œ ì‘ì„±
3. í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸

---

## ë§¤í•‘ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ì„¤ê³„ ì™„ë£Œ
- [ ] 10.5-automation-architecture-design.md ì‘ì„± ì™„ë£Œ
- [ ] ëª¨ë“  ì„¹ì…˜ì´ ìƒì„¸í™”ë˜ì—ˆëŠ”ê°€?

### Phase 2: í…ŒìŠ¤íŠ¸ ì„¤ê³„
- [ ] ê° ì„¤ê³„ ì„¹ì…˜ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì •ì˜
- [ ] ê° í…ŒìŠ¤íŠ¸ íŒŒì¼ë§ˆë‹¤ ìµœì†Œ 3ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### Phase 3: í…ŒìŠ¤íŠ¸ êµ¬í˜„
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ \`__test__\` ê²½ë¡œì— ìˆëŠ”ê°€?
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ”ê°€?

### Phase 4: êµ¬í˜„ ì½”ë“œ
- [ ] ëª¨ë“  êµ¬í˜„ íŒŒì¼ì´ \`_scripts\` ê²½ë¡œì— ìˆëŠ”ê°€?
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ”ê°€?

### Phase 5: ìµœì¢… ê²€ì¦
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ âœ…
- [ ] ëª¨ë“  ì„¤ê³„ í•­ëª© êµ¬í˜„ ì™„ë£Œ âœ…
- [ ] ë°°í¬ ìŠ¹ì¸ âœ…

---

**ë°°í¬**: ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ + ë§¤í•‘ ì™„ë£Œ ì‹œ ì‹¤í–‰
EOF

echo "âœ… Extended guide documents created"
echo ""
echo "ğŸ“„ ìƒì„±ëœ íŒŒì¼ ëª©ë¡:"
ls -lh "$BASE_DIR"/10.5*.md "$BASE_DIR"/10.6*.md "$BASE_DIR"/10.7*.md 2>/dev/null || echo "ì•„ì§ ìƒì„±ë˜ì§€ ì•ŠìŒ"
echo ""
echo "âœ… test-clarify-path.sh ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„ ì™„ë£Œ"
